# telegram-ssh-login-notification
A simple script to check whenever a user log in or log out from your system.

Based on [this script](https://8192.one/post/ssh_login_notification_withtelegram/) but fixed, using only PAM.

## Requirements

1. A server (tested on ubuntu)
2. A telegram account
3. Create a telegram bot from the BotFather and start a chat with it.

The url of your newly created bot will look like http://t.me/your_bots_name
Copy the HTTP API: token generated by the BotFather.

4. Use `@getmyid_bot` bot to get your user ID. 
Should be in the form 
```
Your user ID: XXXXXXXXX 
Current chat ID: XXXXXXXXX
```
5. Edit the script as below

## What to do

1. Check your `/etc/ssh/sshd_config`: `UsePAM yes` it's mandatory.
2. `git clone https://github.com/Matteounitn/telegram-ssh-login-notification.git`
3. `cd telegram-ssh-login-notification` and here `nano script.sh`

**HERE you HAVE TO SET:**
```
USERID="<YOUR-ID>"
KEY="<API-KEY-OF-YOUR-BOT>" 
```
4. `sudo nano /etc/pam.d/sshd` and add **at the end of the file** 
```
session optional pam_exec.so /path/to/your/cloned/repo/telegram-ssh-login-notification/script.sh
```
5. `sudo chmod +x /path/to/your/cloned/repo/telegram-ssh-login-notification/script.sh`
6. Not mandatory, but why not: `sudo service ssh restart` or `sudo systemctl restart sshd` or `sudo systemctl restart ssh`

